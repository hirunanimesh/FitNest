#!/bin/bash
# Script to help update all frontend API files to include auth headers
# This is a reference script - you'll need to manually update each function

echo "ðŸ”„ Frontend API Files That Need Token Updates:"
echo ""
echo "1. frontend/api/admin/route.tsx - âœ… Already updated some functions"
echo "2. frontend/api/calendar/route.tsx - âœ… Already updated fetchEvents function"
echo "3. frontend/api/gym/route.tsx - ðŸ”„ Partially updated"
echo "4. frontend/api/user/route.tsx - âœ… Fully updated"
echo ""
echo "ðŸ“‹ Pattern to follow for each function:"
echo ""
echo "// Before:"
echo "const response = await axios.get('/api/endpoint')"
echo ""
echo "// After:"
echo "const headers = await getAuthHeaders();"
echo "const response = await axios.get('/api/endpoint', { headers })"
echo ""
echo "// For POST/PUT/PATCH requests:"
echo "const response = await axios.post('/api/endpoint', data, { headers })"
echo ""
echo "ðŸš« Routes that DON'T need tokens (already public in API Gateway):"
echo "- /api/auth/* (login, signup, etc.)"
echo "- /api/payment/webhook"
echo "- /api/gym/getallgyms (public listings)"
echo "- /api/gym/one-day (public listings)"
echo "- /api/gym/other (public listings)"
echo "- Stripe callback URLs (success/cancel)"
echo ""
echo "âœ… The token will be automatically:"
echo "- Retrieved from Supabase session"
echo "- Added as 'Authorization: Bearer <token>' header"
echo "- Verified by API Gateway before forwarding to services"